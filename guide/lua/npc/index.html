
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.5">
    
    
      
        <title>3.3 - NPCs - ModCS Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.bde7dde4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#33-npcs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ModCS Documentation" class="md-header__button md-logo" aria-label="ModCS Documentation" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ModCS Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3.3 - NPCs
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal" type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal" type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../intro/" class="md-tabs__link md-tabs__link--active">
        Getting Started
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../api/modcs/" class="md-tabs__link">
        API Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ModCS Documentation" class="md-nav__button md-logo" aria-label="ModCS Documentation" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    ModCS Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Home
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        ModCS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../releases/" class="md-nav__link">
        ModCS Releases
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      <label class="md-nav__link" for="__nav_2_1">
        0 - Introduction
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="0 - Introduction" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          0 - Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/" class="md-nav__link">
        0 - Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/install/" class="md-nav__link">
        0.1 - Installation and getting ready
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/editors/" class="md-nav__link">
        0.2 - Installing an Editor
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      <label class="md-nav__link" for="__nav_2_2">
        1 - Basics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="1 - Basics" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          1 - Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/" class="md-nav__link">
        1 - Basics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/ui/" class="md-nav__link">
        1.1 - Interface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/stage/" class="md-nav__link">
        1.2 - Stage Table
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/tiles/" class="md-nav__link">
        1.3 - Tile Editing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/bgs/" class="md-nav__link">
        1.4 - Backgrounds
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/npc/" class="md-nav__link">
        1.5 - NPC Placement
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/npctbl/" class="md-nav__link">
        1.6 - NPC Table
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      <label class="md-nav__link" for="__nav_2_3">
        2 - Text Scripting
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="2 - Text Scripting" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          2 - Text Scripting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tsc/" class="md-nav__link">
        2 - Text Scripting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tsc/box/" class="md-nav__link">
        2.1 - Making a dialog box appear
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tsc/door/" class="md-nav__link">
        2.2 - Making a door
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tsc/chest/" class="md-nav__link">
        2.3 - Making a chest
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" checked>
      
      <label class="md-nav__link" for="__nav_2_4">
        3 - Lua Scripting
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="3 - Lua Scripting" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          3 - Lua Scripting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        3 - Lua Scripting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../basic/" class="md-nav__link">
        3.1 - Basics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../drawing/" class="md-nav__link">
        3.2 - Drawing
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          3.3 - NPCs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        3.3 - NPCs
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#331-editing-npc-rects" class="md-nav__link">
    3.3.1 - Editing NPC Rects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#332-making-npcs-from-scratch" class="md-nav__link">
    3.3.2 - Making NPCs from scratch
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        API Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/modcs/" class="md-nav__link">
        ModCS Object - Basics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/game/" class="md-nav__link">
        ModCS.Game
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/key/" class="md-nav__link">
        ModCS.Key
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      <label class="md-nav__link" for="__nav_3_4">
        Drawing
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Drawing" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Drawing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/drawing/surface/" class="md-nav__link">
        ModCS.Surface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/drawing/rect/" class="md-nav__link">
        ModCS.Rect
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/drawing/color/" class="md-nav__link">
        ModCS.Color
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/map/" class="md-nav__link">
        ModCS.Map
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/stage/" class="md-nav__link">
        ModCS.Stage
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/tsc/" class="md-nav__link">
        ModCS.Tsc
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_8" type="checkbox" id="__nav_3_8" >
      
      <label class="md-nav__link" for="__nav_3_8">
        Flags
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Flags" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          Flags
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/flags/flag/" class="md-nav__link">
        ModCS.Flag
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/flags/skipflag/" class="md-nav__link">
        ModCS.SkipFlag
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_9" type="checkbox" id="__nav_3_9" >
      
      <label class="md-nav__link" for="__nav_3_9">
        Sound
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Sound" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_9">
          <span class="md-nav__icon md-icon"></span>
          Sound
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sound/organya/" class="md-nav__link">
        ModCS.Organya
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sound/sound/" class="md-nav__link">
        ModCS.Sound
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_10" type="checkbox" id="__nav_3_10" >
      
      <label class="md-nav__link" for="__nav_3_10">
        Game Objects
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Game Objects" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_10">
          <span class="md-nav__icon md-icon"></span>
          Game Objects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/objects/pixel/" class="md-nav__link">
        Pixel Unit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/objects/direction/" class="md-nav__link">
        Direction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/objects/range/" class="md-nav__link">
        ModCS.RangeRect
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_10_4" type="checkbox" id="__nav_3_10_4" >
      
      <label class="md-nav__link" for="__nav_3_10_4">
        Player
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Player" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_10_4">
          <span class="md-nav__icon md-icon"></span>
          Player
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/objects/player/" class="md-nav__link">
        ModCS.Player
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/objects/player/collision/" class="md-nav__link">
        Player Collision detection
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_10_5" type="checkbox" id="__nav_3_10_5" >
      
      <label class="md-nav__link" for="__nav_3_10_5">
        NPCs
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="NPCs" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_10_5">
          <span class="md-nav__icon md-icon"></span>
          NPCs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/objects/npc/" class="md-nav__link">
        ModCS.Npc
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/objects/npc/functions/" class="md-nav__link">
        NPC Manipulation Functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/objects/npc/collision/" class="md-nav__link">
        NPC Collision detection
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/objects/npc/id/" class="md-nav__link">
        NPC Type IDs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/objects/npc/bits/" class="md-nav__link">
        NPC Bits
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/mod/" class="md-nav__link">
        ModCS.Mod
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="33-npcs">3.3 - NPCs</h1>
<p>One of ModCS's Lua API main features is its <a href="/api/objects/npc/">NPC API</a>. In this section of the guide we will be going over basic NPC editing.</p>
<p>To begin editing an NPC Type you simply have to define a <code>ModCS.Npc.ActX()</code> function, where X is the <a href="/api/objects/npc/id/">NPC Type ID</a> you would like to edit. This function will run every frame an NPC of X type exists. The first argument given to this function will be the NPC for which this function is running.</p>
<p>Using <a href="/api/objects/npc/functions/#modcsnpcactcode">ModCS.Npc.ActCode()</a> you may run vanilla NPC code for the NPC given in the function.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cm">--[[</span>
<span class="cm">For every NPC with type 64 (First Cave Critter)</span>
<span class="cm">this function will run, and the NPC will be</span>
<span class="cm">passed to the function as `npc`</span>
<span class="cm">--]]</span>
<span class="kr">function</span> <span class="nc">ModCS</span><span class="p">.</span><span class="nc">Npc</span><span class="p">.</span><span class="nf">Act64</span><span class="p">(</span><span class="n">npc</span><span class="p">)</span>
    <span class="cm">--[[</span>
<span class="cm">    Run the vanilla game code for NPC ID 64</span>
<span class="cm">    (First Cave Critter) for `npc`</span>
<span class="cm">    --]]</span>
    <span class="n">npc</span><span class="p">:</span><span class="n">ActCode</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>
</div>
<p>Doing this will now allow us to inject custom code in the code of NPC type 64, which is the First Cave Critter.</p>
<p>The First Cave Critter, like many vanilla NPCs, uses Act States to differentiate between how the NPC should act in certain scenarios.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">function</span> <span class="nc">ModCS</span><span class="p">.</span><span class="nc">Npc</span><span class="p">.</span><span class="nf">Act64</span><span class="p">(</span><span class="n">npc</span><span class="p">)</span>
    <span class="n">npc</span><span class="p">:</span><span class="n">ActCode</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">npc</span><span class="p">.</span><span class="n">act_no</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>
</div>
<p>Using this code while there is a single NPC of type 64 on screen will allow you to find out what different Act States of the NPC do.</p>
<p>With this method you can find out the Act States of the First Cave Critter NPC:</p>
<ul>
<li>
<p>Act State 1 - Idle</p>
</li>
<li>
<p>Act State 2 - Jumped</p>
</li>
<li>
<p>Act State 3 - Falling</p>
</li>
</ul>
<p>This information can help us do certain modifications to the NPC in our code. For example, we can make First Cave Critters spawn smoke once they land on the floor after a fall:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">function</span> <span class="nc">ModCS</span><span class="p">.</span><span class="nc">Npc</span><span class="p">.</span><span class="nf">Act64</span><span class="p">(</span><span class="n">npc</span><span class="p">)</span>
    <span class="kr">if</span> <span class="p">(</span><span class="n">npc</span><span class="p">.</span><span class="n">act_no</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">npc</span><span class="p">:</span><span class="n">TouchFloor</span><span class="p">())</span> <span class="kr">then</span>
        <span class="n">ModCS</span><span class="p">.</span><span class="n">Npc</span><span class="p">.</span><span class="n">Spawn</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">npc</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">npc</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
    <span class="kr">end</span>

    <span class="n">npc</span><span class="p">:</span><span class="n">ActCode</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>
</div>
<h2 id="331-editing-npc-rects">3.3.1 - Editing NPC Rects</h2>
<p>Similarly to Act States, most NPCs also have <strong>Animation States</strong>. These define what sprite the NPC should be currently using. </p>
<p>You can find out Animation States using a similar method as the one for finding out Act States:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">function</span> <span class="nc">ModCS</span><span class="p">.</span><span class="nc">Npc</span><span class="p">.</span><span class="nf">Act64</span><span class="p">(</span><span class="n">npc</span><span class="p">)</span>
    <span class="n">npc</span><span class="p">:</span><span class="n">ActCode</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>
</div>
<ul>
<li>Animation State 1- Closed eyes</li>
<li>Animation State 2 - Opened eyes</li>
<li>Animation State 3 - Jumping</li>
</ul>
<p>Using this information and <a href="/api/objects/npc/functions/#modcsnpcsetrect"><code>ModCS.Npc.SetRect()</code></a> we can change the Rects of the NPC.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">function</span> <span class="nc">ModCS</span><span class="p">.</span><span class="nc">Npc</span><span class="p">.</span><span class="nf">Act64</span><span class="p">(</span><span class="n">npc</span><span class="p">)</span>
    <span class="n">npc</span><span class="p">:</span><span class="n">ActCode</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>

    <span class="kd">local</span> <span class="n">rcLeft</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">ModCS</span><span class="p">.</span><span class="n">Rect</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
        <span class="n">ModCS</span><span class="p">.</span><span class="n">Rect</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
        <span class="n">ModCS</span><span class="p">.</span><span class="n">Rect</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">local</span> <span class="n">rcRight</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">ModCS</span><span class="p">.</span><span class="n">Rect</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span>
        <span class="n">ModCS</span><span class="p">.</span><span class="n">Rect</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span>
        <span class="n">ModCS</span><span class="p">.</span><span class="n">Rect</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="cm">--[[</span>
<span class="cm">    The game doesn&#39;t do flipped sprites</span>
<span class="cm">    automatically, but we can do them</span>
<span class="cm">    ourselves using npc.direct</span>
<span class="cm">    --]]</span>
    <span class="kr">if</span> <span class="p">(</span><span class="n">npc</span><span class="p">.</span><span class="n">direct</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="kr">then</span>
        <span class="cm">--[[</span>
<span class="cm">        Lua table indexes start at 1 and animation</span>
<span class="cm">        states start at 0, so we add +1 to the table</span>
<span class="cm">        access index</span>
<span class="cm">        --]]</span>
        <span class="n">npc</span><span class="p">:</span><span class="n">SetRect</span><span class="p">(</span><span class="n">rcLeft</span><span class="p">[</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
    <span class="kr">elseif</span> <span class="p">(</span><span class="n">npc</span><span class="p">.</span><span class="n">direct</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="kr">then</span>
        <span class="n">npc</span><span class="p">:</span><span class="n">SetRect</span><span class="p">(</span><span class="n">rcRight</span><span class="p">[</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
    <span class="kr">end</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>
</div>
<p>For a better table syntax, you might want to do regular number tables rather than a table with Rect variables:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">function</span> <span class="nc">ModCS</span><span class="p">.</span><span class="nc">Npc</span><span class="p">.</span><span class="nf">Act64</span><span class="p">(</span><span class="n">npc</span><span class="p">)</span>
    <span class="n">npc</span><span class="p">:</span><span class="n">ActCode</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>

    <span class="kd">local</span> <span class="n">rcLeft</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">16</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">32</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">16</span><span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">local</span> <span class="n">rcRight</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">32</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">32</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">32</span><span class="p">}</span>
    <span class="p">}</span>

    <span class="kr">if</span> <span class="p">(</span><span class="n">npc</span><span class="p">.</span><span class="n">direct</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="kr">then</span>
        <span class="n">npc</span><span class="p">:</span><span class="n">SetRect</span><span class="p">(</span><span class="n">rcLeft</span><span class="p">[</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">rcLeft</span><span class="p">[</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">rcLeft</span><span class="p">[</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span> <span class="n">rcLeft</span><span class="p">[</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">4</span><span class="p">])</span>
    <span class="kr">elseif</span> <span class="p">(</span><span class="n">npc</span><span class="p">.</span><span class="n">direct</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="kr">then</span>
        <span class="n">npc</span><span class="p">:</span><span class="n">SetRect</span><span class="p">(</span><span class="n">rcRight</span><span class="p">[</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">rcRight</span><span class="p">[</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">rcRight</span><span class="p">[</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span> <span class="n">rcRight</span><span class="p">[</span><span class="n">npc</span><span class="p">.</span><span class="n">ani_no</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">4</span><span class="p">])</span>
    <span class="kr">end</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>
</div>
<h2 id="332-making-npcs-from-scratch">3.3.2 - Making NPCs from scratch</h2>
<p>NPC Act functions do not have to contain <code>ModCS.Npc.ActCode()</code>, which allows you to create NPC Types entirely from scratch. This can be done in several ways, so this guide won't go over a definitive way to make NPCs. Instead I recommend checking out examples, reading the documentation or reading NPC code of other people.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../drawing/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              3.2 - Drawing
            </div>
          </div>
        </a>
      
      
        <a href="../../../api/modcs/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              ModCS Object - Basics
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["toc.integrate", "navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.d351de03.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.a1609d9a.min.js"></script>
      
        <script src="../../../assets/dontSaveScroll.js"></script>
      
    
  </body>
</html>